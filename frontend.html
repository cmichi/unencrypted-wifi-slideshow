<!doctype html>
<html lang="en">
<head>
  
  <meta charset="utf-8" />
  <title>Layout modes &middot; Isotope Demo</title>
  
  <!--[if lt IE 9]><script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
  
  <link rel="stylesheet" href="./lib/isotope-site/css/style.css" />
  
  <!-- scripts at bottom of page -->

</head>
<body class="demos ">
  
  <div id="container" class="variable-sizes clearfix">
    
          <!--
    <div class="element other nonmetal   " data-symbol="H" data-category="other">
      <p class="number">1</p>
      <h3 class="symbol">H</h3>
      <h2 class="name">Hydrogen</h2>
      <p class="weight">1.00794</p>
    </div>
    
          
    <div class="element noble-gas nonmetal   " data-symbol="He" data-category="noble-gas">
      <p class="number">2</p>
      <h3 class="symbol">He</h3>
      <h2 class="name">Helium</h2>
      <p class="weight">4.002602</p>
    </div>
    
          
    <div class="element alkali metal   " data-symbol="Li" data-category="alkali">
      <p class="number">3</p>
      <h3 class="symbol">Li</h3>
      <h2 class="name">Lithium</h2>
      <p class="weight">6.941</p>
    </div>
    
          
    <div class="element alkaline-earth metal   " data-symbol="Be" data-category="alkaline-earth">
      <p class="number">4</p>
      <h3 class="symbol">Be</h3>
      <h2 class="name">Beryllium</h2>
      <p class="weight">9.012182</p>
    </div>
    
          
    <div class="element metalloid   " data-symbol="B" data-category="metalloid">
      <p class="number">5</p>
      <h3 class="symbol">B</h3>
      <h2 class="name">Boron</h2>
      <p class="weight">10.811</p>
    </div>
    
          
    <div class="element other nonmetal   " data-symbol="C" data-category="other">
      <p class="number">6</p>
      <h3 class="symbol">C</h3>
      <h2 class="name">Carbon</h2>
      <p class="weight">12.0107</p>
    </div>
    
          
    <div class="element other nonmetal   " data-symbol="N" data-category="other">
      <p class="number">7</p>
      <h3 class="symbol">N</h3>
      <h2 class="name">Nitrogen</h2>
      <p class="weight">14.0067</p>
    </div>
    
          
    <div class="element other nonmetal   " data-symbol="O" data-category="other">
      <p class="number">8</p>
      <h3 class="symbol">O</h3>
      <h2 class="name">Oxygen</h2>
      <p class="weight">15.9994</p>
    </div>
    
          
    <div class="element halogen nonmetal   " data-symbol="F" data-category="halogen">
      <p class="number">9</p>
      <h3 class="symbol">F</h3>
      <h2 class="name">Fluorine</h2>
      <p class="weight">18.9984032</p>
    </div>
    
          
    <div class="element noble-gas nonmetal   " data-symbol="Ne" data-category="noble-gas">
      <p class="number">10</p>
      <h3 class="symbol">Ne</h3>
      <h2 class="name">Neon</h2>
      <p class="weight">20.1797</p>
    </div>
    
          
    <div class="element alkali metal   " data-symbol="Na" data-category="alkali">
      <p class="number">11</p>
      <h3 class="symbol">Na</h3>
      <h2 class="name">Sodium</h2>
      <p class="weight">22.98976928</p>
    </div>
    
          
    <div class="element alkaline-earth metal   " data-symbol="Mg" data-category="alkaline-earth">
      <p class="number">12</p>
      <h3 class="symbol">Mg</h3>
      <h2 class="name">Magnesium</h2>
      <p class="weight">24.305</p>
    </div>
    
          
    <div class="element post-transition metal   " data-symbol="Al" data-category="post-transition">
      <p class="number">13</p>
      <h3 class="symbol">Al</h3>
      <h2 class="name">Aluminium</h2>
      <p class="weight">26.9815386</p>
    </div>
    
          
    <div class="element metalloid   " data-symbol="Si" data-category="metalloid">
      <p class="number">14</p>
      <h3 class="symbol">Si</h3>
      <h2 class="name">Silicon</h2>
      <p class="weight">28.0855</p>
    </div>
    
          
    <div class="element other nonmetal   " data-symbol="P" data-category="other">
      <p class="number">15</p>
      <h3 class="symbol">P</h3>
      <h2 class="name">Phosphorus</h2>
      <p class="weight">30.973762</p>
    </div>
    
          
    <div class="element other nonmetal   " data-symbol="S" data-category="other">
      <p class="number">16</p>
      <h3 class="symbol">S</h3>
      <h2 class="name">Sulfur</h2>
      <p class="weight">32.065</p>
    </div>
    
          
    <div class="element halogen nonmetal   " data-symbol="Cl" data-category="halogen">
      <p class="number">17</p>
      <h3 class="symbol">Cl</h3>
      <h2 class="name">Chlorine</h2>
      <p class="weight">35.453</p>
    </div>
    
          
    <div class="element noble-gas nonmetal   " data-symbol="Ar" data-category="noble-gas">
      <p class="number">18</p>
      <h3 class="symbol">Ar</h3>
      <h2 class="name">Argon</h2>
      <p class="weight">39.948</p>
    </div>
    
          
    <div class="element alkali metal   " data-symbol="K" data-category="alkali">
      <p class="number">19</p>
      <h3 class="symbol">K</h3>
      <h2 class="name">Potassium</h2>
      <p class="weight">39.0983</p>
    </div>
    
          
    <div class="element alkaline-earth metal   " data-symbol="Ca" data-category="alkaline-earth">
      <p class="number">20</p>
      <h3 class="symbol">Ca</h3>
      <h2 class="name">Calcium</h2>
      <p class="weight">40.078</p>
    </div>
-->
    
  </div> <!-- #container -->
  
  <script src="./lib/isotope-site/js/jquery-1.7.1.min.js"></script>
  <script src="./lib/isotope-site/jquery.isotope.min.js"></script>
  <script>
/*
  var $container = $('#container');
	var foo = $container.width() / 8;
	foo=120;
*/
    $(function(){
      var $container = $('#container');

      
      // add randomish size classes
      $container.find('.element').each(function(){
        var $this = $(this),
            number = parseInt( $this.find('.number').text(), 10 );
        if ( number % 7 % 2 === 1 ) {
          $this.addClass('width2');
        }
        if ( number % 3 === 0 ) {
          $this.addClass('height2');
        }
      });
      /*
      $container.isotope({
        itemSelector : '.element',
        masonry : {
          columnWidth : 120
        },
        masonryHorizontal : {
          rowHeight: 120
        },
        cellsByRow : {
          columnWidth : 240,
          rowHeight : 240
        },
        cellsByColumn : {
          columnWidth : 240,
          rowHeight : 240
        }
      });
      */

	var foo = 120;
	
	// initialize Isotope
	$container.isotope({
	  // options...
	  itemSelector : '.element',
	  resizable: false, // disable normal resizing
	  // set columnWidth to a percentage of container width
	  masonry: { 
		columnWidth: foo,
//		columnWidth: ,
		masonryHorizontal : {
          rowHeight: foo
        },
        cellsByRow : {
          columnWidth : foo*2,
          rowHeight : foo*2
        },
        cellsByColumn : {
          columnWidth : foo*2,
          rowHeight : foo*2
        }
	  }
	});

	// update columnWidth on window resize
	$(window).smartresize(function(){
	  $container.isotope({
	    // update columnWidth to a percentage of container width
	    masonry: { columnWidth: foo }
	  });
	});


      
    });



	var displaying = [];


	function addNew(data) {
		//alert('./lib/isotope-site/tmp/' + imgPath);
		/*
		var $newItems = $('<div class="element halogen nonmetal   " data-symbol="Cl" data-category="halogen"><p class="number">17</p>      <h3 class="symbol">Cl</h3>      <h2 class="name">Chlorine</h2>      <p class="weight">35.453</p>    </div>');
		$('#container').append( $newItems ).isotope( 'insert', $newItems );
		var $newItems = $('<div class="element halogen nonmetal width2 height2   " data-symbol="Cl" data-category="halogen"><p class="number">17</p>      <h3 class="symbol">Cl</h3>      <h2 class="name">Chlorine</h2>      <p class="weight">35.453</p>    </div>');
		$('#container').append( $newItems ).isotope( 'insert', $newItems );
		var $newItems = $('<div class="element halogen nonmetal width2 height2   " data-symbol="Cl" data-category="halogen"><p class="number">17</p>      <h3 class="symbol">Cl</h3>      <h2 class="name">Chlorine2</h2>      <p class="weight">35.453</p>    </div>');
		$('#container').append( $newItems ).isotope( 'insert', $newItems );
		var $newItems = $('<div class="element halogen nonmetal width2 height2" data-symbol="Cl" data-category="halogen"><p class="number">17</p>      <h3 class="symbol">Cl</h3>      <h2 class="name">Chlorine3</h2>      <p class="weight">35.453</p>    </div>');
		var $newItems = $('<div class="element halogen nonmetal width2 height2" data-symbol="Cl" data-category="halogen"><img src="'+imgPath+'" /></div>');
		*/
		
		var sizeOptWidth = '';
		var sizeOptHeight = '';
		
		if (data.width > 110) sizeOptWidth = 2;
		//if (data.width > 230) sizeOptWidth = 3;
		
		if (data.height > 110) sizeOptHeight = 2;
		//if (data.height > 230) sizeOptHeight = 3;
		
		
		
		var item = '<div class="element halogen nonmetal width'+sizeOptWidth+' height'+sizeOptHeight+'" data-symbol="Cl" data-category="halogen">' +
		 		   '<img src="./tmp/' + data.path + '" />' +
				   '</div>';
				
		
		if (!displaying.inArray(data.path)) {
			$('#container').append( $(item) ).isotope( 'insert', $(item) );
			displaying.push(data.path);
		}
	}


	Array.prototype.inArray = function(value) {
		console.log(this);
		for (var index in this) {
			if (this[index] === value)
				return true;
		}
		return false;
	}

	onFull = function() {
		// remove sth
	}

//	window.setTimeout("addNew('1312549374025.jpeg');", 1000);
  </script>
  
    
<script src="http://localhost:1337/socket.io/socket.io.js"></script>
<script>
  var socket = io.connect('http://localhost:1337');
  socket.on('news', function (data) {
    console.log(data);
	addNew(data);
    //socket.emit('my other event', { my: 'data' });
  });
</script>

  </section> <!-- #content -->
  

</body>
</html>